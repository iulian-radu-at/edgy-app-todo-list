(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(module,__webpack_exports__,__webpack_require__){"use strict";var luxon=__webpack_require__(364);__webpack_require__.d(__webpack_exports__,"b",(function(){return TodoObjects_getTodoEventObject})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getTodoListObject})),__webpack_require__.d(__webpack_exports__,"a",(function(){return TodoObjects_getJsonEdgyObjectToTask}));var TodoObjects_getTodoEventObject=function getTodoEventObject(api,id,description,done){return{id:id,name:"TODO-TASK",type:"EVENT",data:{summary:description,description:description,percentComplete:done?100:0,status:done?"COMPLETED":"NEEDS-ACTION",completed:done?TodoObjects_getNow():void 0},version:{changelog:getChangelog(done)},owner:{id:api.getAccountId()}}},getTodoListObject=function getTodoListObject(api,name,taskEventIds){return{name:name,type:"APP-CFG",data:{taskEventIds:taskEventIds},owner:{id:api.getAppId()}}},TodoObjects_getNow=function getNow(){return luxon.DateTime.utc().toISO()},getChangelog=function getChangelog(done){return done?"Marked as done":"Marked as not done"},TodoObjects_getJsonEdgyObjectToTask=function getJsonEdgyObjectToTask(item){if(!(item instanceof Error)){var id=item.id,_ref=item.data;return{id:id,text:_ref.description,done:"COMPLETED"===_ref.status}}}},371:function(module,__webpack_exports__,__webpack_require__){"use strict";var _home_rai_Workspace_edgy_apps_public_edgy_app_todo_list_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(372),_home_rai_Workspace_edgy_apps_public_edgy_app_todo_list_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(80),_home_rai_Workspace_edgy_apps_public_edgy_app_todo_list_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_home_rai_Workspace_edgy_apps_public_edgy_app_todo_list_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__),_home_rai_Workspace_edgy_apps_public_edgy_app_todo_list_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(122),_home_rai_Workspace_edgy_apps_public_edgy_app_todo_list_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(79),list_of_todos__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(373),list_of_todos__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(list_of_todos__WEBPACK_IMPORTED_MODULE_4__),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),_api_ApiExt__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(72),_api_TodoObjects__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(101);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var getTaskEventByIds=function getTaskEventByIds(taskEventIds){return taskEventIds.map(getTaskEventById)},getTaskEventById=function getTaskEventById(taskEventId){return _api_ApiExt__WEBPACK_IMPORTED_MODULE_6__.a.getObject(taskEventId,void 0,["id","data"])};__webpack_exports__.a=function ViewList(_ref){var taskEventIds=_ref.taskEventIds,_React$useState=react__WEBPACK_IMPORTED_MODULE_5___default.a.useState(),_React$useState2=Object(_home_rai_Workspace_edgy_apps_public_edgy_app_todo_list_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_React$useState,2),items=_React$useState2[0],setItems=_React$useState2[1];if(Object(react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((function(){Object(_home_rai_Workspace_edgy_apps_public_edgy_app_todo_list_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(_home_rai_Workspace_edgy_apps_public_edgy_app_todo_list_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function _callee(){var objs,tasks;return _home_rai_Workspace_edgy_apps_public_edgy_app_todo_list_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Promise.all(getTaskEventByIds(taskEventIds));case 2:objs=_context.sent,tasks=objs.map(_api_TodoObjects__WEBPACK_IMPORTED_MODULE_7__.a).filter((function(item){return void 0!==item})),setItems(tasks);case 5:case"end":return _context.stop()}}),_callee)})))()}),[setItems,taskEventIds]),void 0===items)return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",null,"Loading...");return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(list_of_todos__WEBPACK_IMPORTED_MODULE_4___default.a,{items:items,onChange:function handleChange(items,updatedItem){setItems(items);var updatedEvent=Object(_api_TodoObjects__WEBPACK_IMPORTED_MODULE_7__.b)(_api_ApiExt__WEBPACK_IMPORTED_MODULE_6__.a,updatedItem.id,updatedItem.text,updatedItem.done);_api_ApiExt__WEBPACK_IMPORTED_MODULE_6__.a.updateObject(updatedEvent,void 0,(function(){return setItems(items.map((function(item){return item.id!==updatedItem.id?item:function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){Object(_home_rai_Workspace_edgy_apps_public_edgy_app_todo_list_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},item,{done:!updatedItem.done})})))}))}})}},374:function(module,__webpack_exports__,__webpack_require__){"use strict";var regenerator=__webpack_require__(80),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__(122),slicedToArray=__webpack_require__(79),lib=__webpack_require__(365),lib_default=__webpack_require__.n(lib),react=__webpack_require__(0),react_default=__webpack_require__.n(react),ApiExt=__webpack_require__(72),TodoObjects=__webpack_require__(101),styles={name:{flexGrow:1,marginRight:20},top:{alignItems:"center",display:"flex",margin:"10px 10px 0 10px"}},components_CreateListLayout=function CreateListLayout(_ref){var list=_ref.list,name=_ref.name,saveButton=_ref.saveButton,saveMessage=_ref.saveMessage;return react_default.a.createElement("div",{style:styles.container},saveMessage,react_default.a.createElement("div",{style:styles.top},react_default.a.createElement("div",{style:styles.name},name),react_default.a.createElement("div",{style:styles.saveButton},saveButton)),list)},TextField=__webpack_require__(889),formHelperTextProps={style:{color:"#ff0000"}},components_Name=function Name(_ref){var name=_ref.name,_onChange=_ref.onChange;return react_default.a.createElement(TextField.a,{label:"Name of the list",value:name,onChange:function onChange(ev){return _onChange(ev.target.value)},fullWidth:!0,helperText:0===name.length?"The name is required":" ",FormHelperTextProps:formHelperTextProps})},Button=__webpack_require__(890),style={whiteSpace:"nowrap"},components_SaveButton=function SaveButton(_ref){var isDisabled=_ref.isDisabled,onClick=_ref.onClick;return react_default.a.createElement(Button.a,{variant:"contained",color:"primary",disabled:isDisabled,onClick:onClick,style:style},"Save")},Snackbar=__webpack_require__(892),SnackbarContent=__webpack_require__(893),SaveMessage_style={backgroundColor:"#008000"},components_SaveMessage=function SaveMessage(_ref){var message=_ref.message,open=_ref.open,_React$useState=react_default.a.useState(open),_React$useState2=Object(slicedToArray.a)(_React$useState,2),isOpen=_React$useState2[0],setIsOpen=_React$useState2[1];Object(react.useEffect)((function(){return setIsOpen(open)}),[open]);var handleClose=react_default.a.useCallback((function(_,reason){"clickaway"!==reason&&setIsOpen(!1)}),[setIsOpen]);return react_default.a.createElement(Snackbar.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:isOpen,autoHideDuration:500,onClose:handleClose},react_default.a.createElement(SnackbarContent.a,{"aria-describedby":"snackbar-message-id",message:react_default.a.createElement("div",{id:"snackbar-message-id"},message),style:SaveMessage_style}))},saveObjectWithRetry=function(){var _ref2=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee2(api,obj,retries){var i,savedObject;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:i=0;case 1:if(!(i<retries)){_context2.next=11;break}return _context2.next=4,api.saveObject(obj);case 4:if(!((savedObject=_context2.sent)instanceof Error)){_context2.next=7;break}return _context2.abrupt("continue",8);case 7:return _context2.abrupt("return",savedObject.id);case 8:i++,_context2.next=1;break;case 11:case"end":return _context2.stop()}}),_callee2)})));return function saveObjectWithRetry(_x,_x2,_x3){return _ref2.apply(this,arguments)}}();__webpack_exports__.a=function CreateList(){var _useState=Object(react.useState)(""),_useState2=Object(slicedToArray.a)(_useState,2),name=_useState2[0],setName=_useState2[1],_useState3=Object(react.useState)([]),_useState4=Object(slicedToArray.a)(_useState3,2),items=_useState4[0],setItems=_useState4[1],_useState5=Object(react.useState)(),_useState6=Object(slicedToArray.a)(_useState5,2),message=_useState6[0],setMessage=_useState6[1],handleSave=react_default.a.useCallback(Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(){var idSavedEvents,obj;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return setMessage("All tasks were saved"),_context.next=3,Promise.all(items.map((function(item){var obj=Object(TodoObjects.b)(ApiExt.a,void 0,item.text);return saveObjectWithRetry(ApiExt.a,obj,3)})));case 3:if(_context.t0=function(id){return void 0!==id},0!==(idSavedEvents=_context.sent.filter(_context.t0)).length){_context.next=8;break}return setMessage("No task could be saved"),_context.abrupt("return");case 8:return idSavedEvents.length!==items.length&&setMessage("Not all tasks were saved"),obj=Object(TodoObjects.c)(ApiExt.a,name,idSavedEvents),_context.next=12,saveObjectWithRetry(ApiExt.a,obj,3);case 12:if(void 0!==_context.sent){_context.next=16;break}return setMessage("Failed to save"),_context.abrupt("return");case 16:setName(""),setItems([]);case 18:case"end":return _context.stop()}}),_callee)}))),[items,name,setMessage]);return react_default.a.createElement(components_CreateListLayout,{name:react_default.a.createElement(components_Name,{name:name,onChange:function handleChangeName(newName){setName(newName),setMessage(void 0)}}),saveButton:react_default.a.createElement(components_SaveButton,{isDisabled:0===name.length||0===items.length,onClick:handleSave}),saveMessage:react_default.a.createElement(components_SaveMessage,{open:void 0!==message,message:message}),list:react_default.a.createElement(lib_default.a,{items:items,onChange:function handleChangeItems(newItems){setItems(newItems),setMessage(void 0)}})})}},405:function(module,exports,__webpack_require__){__webpack_require__(406),__webpack_require__(515),module.exports=__webpack_require__(516)},427:function(module,exports){},516:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(167);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)((function loadStories(){__webpack_require__(715)}),module)}.call(this,__webpack_require__(198)(module))},715:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(167),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),_src_components_CreateList__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(374),_src_components_ViewList__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(371),style={height:20},taskEventIds=["1","2"];Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.storiesOf)("App",module).add("create a list",(function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{style:style},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_src_components_CreateList__WEBPACK_IMPORTED_MODULE_2__.a,null))})).add("view a list",(function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{style:style},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_src_components_ViewList__WEBPACK_IMPORTED_MODULE_3__.a,{taskEventIds:taskEventIds}))}))}.call(this,__webpack_require__(198)(module))},72:function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(361),possibleConstructorReturn=__webpack_require__(375),getPrototypeOf=__webpack_require__(362),inherits=__webpack_require__(376),Api=__webpack_require__(363),MockApiData={AllAccounts:[{data:{fullName:"test account",roles:["ALL","Tester"]},email:"test@example.com",fullName:"test account",id:"1",roles:["ALL","Tester"]},{data:{fullName:"admin account",roles:["ALL","Admin"]},email:"admin@example.com",fullName:"admin account",id:"1",roles:["ALL","Admin"]}],AllAppInfos:[{favorite:!0,id:"4",name:"App 1",type:"APP"},{favorite:!1,id:"1",name:"App 2",type:"APP"},{favorite:!1,id:"2a",name:"App 3",type:"APP"},{favorite:!1,id:"8x",name:"App 4",type:"APP"}],AllDefinedColors:["red","green","blue","aqua","magenta"],AllDefinedRoles:["ALL","Admin","Developer","Tester"],AllDefinedTags:["Tag1","Tag2","Tag3","Tag4"],AllObjectVersions:[{name:"App 1",version:1,changelog:"First app",latest:!0,created:{on:"2018-12-08 17:07:26",by:"Test API <api@edgy.ferbinder.com>"}}],AnObject:{id:"7x",type:"CUSTOM_TYPE",name:"Small number",data:{value:"12122121343243"},version:{number:1,changelog:"First attempt",created:{on:"2018-12-08 17:01:15",by:"Test API <api@edgy.ferbinder.com>"},changed:{on:"2018-12-08 17:01:15",by:"Test API <api@edgy.ferbinder.com>"},latest:!0},acl:{"api@edgy.ferbinder.com":["c","d","f","n","p","r","t","w"]}},AnObjectAllVersions:[{id:"7x",type:"CUSTOM_TYPE",name:"Small number",data:{value:"12122121343243"},version:{number:1,changelog:"First attempt",created:{on:"2018-12-08 17:01:15",by:"Test API <api@edgy.ferbinder.com>"},changed:{on:"2018-12-08 17:01:15",by:"Test API <api@edgy.ferbinder.com>"},latest:!0},acl:{"api@edgy.ferbinder.com":["c","d","f","n","p","r","t","w"]}}],ApiKey:"1234123456781234abcdefghi",AppCfg:{taskEventIds:["1","2"]},AppId:"appId",AppObject:{id:"1",type:"EVENT",name:"TODO-TASK",data:"Task 1",version:{number:1,changelog:"A ToDo task",created:{on:"2018-08-26 08:56:37",by:"Test API <api@edgy.ferbinder.com>"},changed:{on:"2018-08-28 18:56:37",by:"Test API <api@edgy.ferbinder.com>"},latest:!0},owner:{id:"10",name:"Fake owner"},acl:{"api@edgy.ferbinder.com":["c","d","f","n","p","r","t","w"]}},AppObjectAllVersions:[{id:"1",type:"APP-CFG",name:"Mock APP-CFG (OLD)",data:{custom_field1:"Field 1",custom_field0:"Fields"},version:{number:1,changelog:"Mock app object (draft)",created:{on:"2018-08-26 08:56:37",by:"Test API <api@edgy.ferbinder.com>"},changed:{on:"2018-08-26 08:56:37",by:"Test API <api@edgy.ferbinder.com>"},latest:!1},owner:{id:"10",name:"Fake owner"},acl:{"api@edgy.ferbinder.com":["c","d","f","n","p","r","t","w"]}},{id:"1",type:"APP-CFG",name:"Mock APP-CFG",data:{custom_field1:"Field 1",custom_field2:"Field 2"},tags:["Tag 1","Tag 2"],colors:["red","green","blue"],version:{number:2,changelog:"Mock app object",created:{on:"2018-08-26 08:56:37",by:"Test API <api@edgy.ferbinder.com>"},changed:{on:"2018-08-28 18:56:37",by:"Test API <api@edgy.ferbinder.com>"},latest:!0},owner:{id:"10",name:"Fake owner"},acl:{"api@edgy.ferbinder.com":["c","d","f","n","p","r","t","w"]}}],AppType:"APP",AppVersion:1,BaseUrl:"https://edgy.ferbinder.com/api/@playground",FindObjects:[{id:"7x",type:"CUSTOM_TYPE",name:"Small number",data:{value:"12122121343243"},version:{number:1,changelog:"First attempt",created:{on:"2018-12-08 17:01:15",by:"Test API <api@edgy.ferbinder.com>"},changed:{on:"2018-12-08 17:01:15",by:"Test API <api@edgy.ferbinder.com>"},latest:!0},acl:{"api@edgy.ferbinder.com":["c","d","f","n","p","r","t","w"]}},{id:"7y",type:"CUSTOM_TYPE",name:"Big number",data:{value:"9898989898987"},version:{number:1,changelog:"Second attempt",created:{on:"2018-12-08 17:07:26",by:"Test API <api@edgy.ferbinder.com>"},changed:{on:"2018-12-08 17:07:26",by:"Test API <api@edgy.ferbinder.com>"},latest:!0},acl:{"api@edgy.ferbinder.com":["c","f","n","p","r","t","w"]}}],MySignature:"Test API <api@edgy.ferbinder.com>",Objects:{1:{id:"1",type:"EVENT",name:"TODO-TASK",data:{description:"Task 1"},version:{number:1,changelog:"A ToDo task",created:{on:"2018-08-26 08:56:37",by:"Test API <api@edgy.ferbinder.com>"},changed:{on:"2018-08-28 18:56:37",by:"Test API <api@edgy.ferbinder.com>"},latest:!0},owner:{id:"10",name:"Fake owner"},acl:{"api@edgy.ferbinder.com":["c","d","f","n","p","r","t","w"]}},2:{id:"2",type:"EVENT",name:"TODO-TASK",data:{description:"Task 2",done:!0},version:{number:1,changelog:"A ToDo task",created:{on:"2018-08-26 08:56:37",by:"Test API <api@edgy.ferbinder.com>"},changed:{on:"2018-08-28 18:56:37",by:"Test API <api@edgy.ferbinder.com>"},latest:!0},owner:{id:"10",name:"Fake owner"},acl:{"api@edgy.ferbinder.com":["c","d","f","n","p","r","t","w"]}}}},ApiExt_ApiExt=function(_Api){function ApiExt(){return Object(classCallCheck.a)(this,ApiExt),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(ApiExt).call(this,MockApiData))}return Object(inherits.a)(ApiExt,_Api),ApiExt}(__webpack_require__.n(Api).a);__webpack_exports__.a=new ApiExt_ApiExt}},[[405,1,2]]]);
//# sourceMappingURL=main.d6776773.chunk.js.map